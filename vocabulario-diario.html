<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vocabul√°rio Di√°rio - Prot√≥tipo Visual</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        .page { display: none; }
        .page.active { display: block; }
        .auth-card { max-width: 400px; margin: 50px auto; }
        .gradient-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .gradient-btn:hover { 
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .stat-number { font-size: 2.5rem; font-weight: bold; color: #667eea; }
        .word-display { font-size: 3rem; font-weight: bold; }
        .toast-custom {
            position: fixed; top: 20px; right: 20px; z-index: 1050;
            transform: translateX(120%); transition: transform 0.4s ease-in-out;
        }
        .toast-custom.show { transform: translateX(0); }
        .feedback p { margin-bottom: 0.5rem; }
        @media (max-width: 768px) {
            .word-display { font-size: 2rem; }
        }
    </style>
</head>
<body>

    <div id="toast" class="toast-custom bg-light border rounded shadow-lg">
        <div id="toast-content" class="p-3"></div>
    </div>

    <div id="login-page" class="page active">
        <div class="container-fluid">
            <div class="row justify-content-center min-vh-100 align-items-center">
                <div class="col-11 col-sm-8 col-md-6 col-lg-4">
                    <div class="text-center mb-4">
                        <h1 class="text-white display-5 fw-light">Vocabul√°rio Di√°rio</h1>
                    </div>
                    <div class="card shadow-lg border-0">
                        <div class="card-body p-4 p-sm-5">
                            <h2 class="card-title text-center mb-4">Entrar</h2>
                            <form id="login-form">
                                <div class="mb-3">
                                    <label for="login-username" class="form-label">Nome de Utilizador:</label>
                                    <input type="text" id="login-username" class="form-control" value="Junio" required>
                                </div>
                                <div class="mb-3">
                                    <label for="login-password" class="form-label">Senha:</label>
                                    <input type="password" id="login-password" class="form-control" value="123" required>
                                </div>
                                <button type="submit" class="btn gradient-btn text-white w-100 py-2 mt-3">Entrar</button>
                            </form>
                            <div class="text-center mt-3">
                                <a href="#" id="show-signup" class="text-decoration-none">N√£o tem conta? Cadastre-se aqui</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="signup-page" class="page">
        <div class="container-fluid">
            <div class="row justify-content-center min-vh-100 align-items-center">
                <div class="col-11 col-sm-8 col-md-6 col-lg-4">
                    <div class="text-center mb-4">
                        <h1 class="text-white display-5 fw-light">Vocabul√°rio Di√°rio</h1>
                    </div>
                    <div class="card shadow-lg border-0">
                        <div class="card-body p-4 p-sm-5">
                            <h2 class="card-title text-center mb-4">Criar Conta</h2>
                            <form id="signup-form">
                                <div class="mb-3"><label for="signup-username" class="form-label">Nome de Utilizador:</label><input type="text" id="signup-username" class="form-control" required></div>
                                <div class="mb-3"><label for="signup-password" class="form-label">Senha:</label><input type="password" id="signup-password" class="form-control" required></div>
                                <div class="mb-3"><label for="confirm-password" class="form-label">Confirmar Senha:</label><input type="password" id="confirm-password" class="form-control" required></div>
                                <button type="submit" class="btn gradient-btn text-white w-100 py-2 mt-3">Cadastrar</button>
                            </form>
                            <div class="text-center mt-3">
                                <a href="#" id="show-login" class="text-decoration-none">J√° tem conta? Entre aqui</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="dashboard-page" class="page">
        <div class="container-fluid py-4">
            <div class="text-center mb-4">
                <h1 class="text-white display-6">Bem-vindo, <span id="username-display">Utilizador</span>!</h1>
            </div>
            <div class="row justify-content-center">
                <div class="col-12 col-xl-10">
                    <div class="card shadow-lg border-0 mb-4">
                        <div class="card-body p-4">
                            <h2 class="card-title mb-4">üìä Estat√≠sticas</h2>
                            <div class="row g-3 mb-4">
                                <div class="col-6 col-lg-3"><div class="bg-light p-3 rounded text-center h-100"><h6 class="text-muted mb-1">Vocabul√°rio Total</h6><div class="stat-number" id="total-words">120</div></div></div>
                                <div class="col-6 col-lg-3"><div class="bg-light p-3 rounded text-center h-100"><h6 class="text-muted mb-1">Em Revis√£o</h6><div class="stat-number" id="words-review">15</div></div></div>
                                <div class="col-6 col-lg-3"><div class="bg-light p-3 rounded text-center h-100"><h6 class="text-muted mb-1">Conhecidas</h6><div class="stat-number" id="words-known">100</div></div></div>
                                <div class="col-6 col-lg-3"><div class="bg-light p-3 rounded text-center h-100"><h6 class="text-muted mb-1">Aprendidas</h6><div class="stat-number" id="words-learned">20</div></div></div>
                            </div>
                            <div class="bg-light border rounded p-3 mb-4"><h5 class="mb-3">üìà Evolu√ß√£o do Vocabul√°rio</h5><canvas id="progress-chart"></canvas></div>
                            <div class="row g-2">
                                <div class="col-6 col-md-3"><button id="start-study-btn" class="btn gradient-btn text-white w-100 py-2">üìö Estudar</button></div>
                                <div class="col-6 col-md-3"><button id="view-training-btn" class="btn btn-outline-secondary w-100 py-2">üèãÔ∏è Treinos</button></div>
                                <div class="col-6 col-md-3"><button id="settings-btn" class="btn btn-outline-secondary w-100 py-2">‚öôÔ∏è Config</button></div>
                                <div class="col-6 col-md-3"><button id="logout-btn" class="btn btn-outline-danger w-100 py-2">üö™ Sair</button></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="study-page" class="page">
        <div class="container-fluid py-4">
            <div class="text-center mb-4">
                <h1 class="text-white display-6" id="session-title">üìö Sess√£o de Estudo</h1>
            </div>
            <div class="row justify-content-center mb-4" id="session-score-container">
                <div class="col-auto"><div class="text-center text-white-50"><div class="fs-1">‚úÖ</div><div class="fs-3 fw-bold" id="correct-count">0</div><small>Acertos</small></div></div>
                <div class="col-auto"><div class="text-center text-white-50"><div class="fs-1">‚ùå</div><div class="fs-3 fw-bold" id="incorrect-count">0</div><small>Erros</small></div></div>
            </div>
            <div class="row justify-content-center">
                <div class="col-12 col-md-8 col-lg-6">
                    <div class="card shadow-lg border-0">
                        <div class="card-body p-5 text-center">
                            <h3 class="mb-3">Qual a tradu√ß√£o de:</h3>
                            <div class="word-display mb-3" id="current-word">Developer</div>
                            <p class="text-muted" id="training-progress-text">Cart√£o <span id="current-card">1</span> de <span id="total-cards">5</span></p>
                            <div id="answer-form-container">
                                <form id="answer-form">
                                    <input type="text" id="user-answer" class="form-control form-control-lg text-center mb-3" placeholder="Digite sua resposta aqui" required autocomplete="off">
                                    <button type="submit" class="btn gradient-btn text-white btn-lg">Verificar</button>
                                </form>
                            </div>
                            <div id="feedback-container" class="mt-3" style="display: none;"></div>
                        </div>
                    </div>
                    <div class="text-center mt-4"><button id="study-back-btn" class="btn btn-outline-light">‚Üê Voltar ao Dashboard</button></div>
                </div>
            </div>
        </div>
    </div>

    <div id="training-page" class="page">
        <div class="container-fluid py-4">
            <div class="text-center mb-4"><h1 class="text-white display-6">üèãÔ∏è Meus Treinos</h1></div>
            <div class="row justify-content-center">
                <div class="col-12 col-lg-8">
                    <div class="card shadow-lg border-0">
                        <div class="card-body p-4">
                            <h2 class="card-title mb-4">Treinos Pendentes</h2>
                            <div class="bg-light p-3 rounded mb-4">
                                <h5 class="mb-3">üéØ Progresso da Meta de Hoje</h5>
                                <p class="mb-2"><span id="training-current">8</span> / <span id="training-goal">10</span> palavras dominadas (<span id="training-percentage">80</span>%)</p>
                                <div class="progress mb-2" style="height: 20px;"><div id="training-progress-bar" class="progress-bar" style="width: 80%; background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);"></div></div>
                            </div>
                            <div class="bg-light p-3 rounded mb-3 d-flex flex-column flex-sm-row justify-content-between align-items-start align-items-sm-center">
                                <div class="mb-2 mb-sm-0"><strong>üìÖ Conjunto do dia: 25/08/2025</strong><br><small class="text-muted">5 palavras para treinar</small></div>
                                <button class="btn gradient-btn text-white" onclick="startTraining(1)">Iniciar Treino</button>
                            </div>
                        </div>
                    </div>
                    <div class="text-center mt-4"><button id="training-back-btn" class="btn btn-outline-light">‚Üê Voltar ao Dashboard</button></div>
                </div>
            </div>
        </div>
    </div>

    <div id="settings-page" class="page">
        <div class="container-fluid py-4">
            <div class="text-center mb-4"><h1 class="text-white display-6">‚öôÔ∏è Configura√ß√µes</h1></div>
            <div class="row justify-content-center">
                <div class="col-12 col-md-8 col-lg-6">
                    <div class="card shadow-lg border-0">
                        <div class="card-body p-4">
                            <h2 class="card-title mb-4">Configura√ß√µes da Conta</h2>
                            <p class="mb-4">Ol√°, <span id="settings-username" class="fw-bold">Utilizador</span>. Gerencie as suas prefer√™ncias aqui.</p>
                            <form id="goal-form" class="mb-4">
                                <div class="mb-3"><label for="daily-goal-input" class="form-label">Meta di√°ria de palavras:</label><input type="number" id="daily-goal-input" class="form-control" min="1" max="100" value="10" required></div>
                                <button type="submit" class="btn gradient-btn text-white">Salvar Meta</button>
                            </form>
                            <div class="border border-danger bg-danger bg-opacity-10 p-3 rounded">
                                <h5 class="text-danger mb-3">‚ö†Ô∏è Zona de Perigo</h5>
                                <p class="mb-3">A a√ß√£o abaixo √© irrevers√≠vel. Todo o seu progresso ser√° apagado permanentemente.</p>
                                <button id="reset-progress-btn" class="btn btn-danger">üîÑ Reiniciar Progresso</button>
                            </div>
                        </div>
                    </div>
                    <div class="text-center mt-4"><button id="settings-back-btn" class="btn btn-outline-light">‚Üê Voltar ao Dashboard</button></div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // 3. Script Global e Simula√ß√£o (Organizado)
        document.addEventListener('DOMContentLoaded', function() {
            // --- Estado Global da Aplica√ß√£o (Simula√ß√£o do Backend) ---
            const appState = {
                user: null,
                dailyGoal: 10,
                stats: { totalWords: 120, wordsInReview: 15, wordsKnown: 100, wordsLearned: 20 },
                dailyProgress: { current: 8, goal: 10 },
                sessionStats: { correct: 0, incorrect: 0 },
                currentWordIndex: 0,
                words: [
                    { id: 1, word: "Developer", translation: "desenvolvedor" },
                    { id: 2, word: "Computer", translation: "computador" },
                    { id: 3, word: "Database", translation: "base de dados" },
                    { id: 4, word: "Network", translation: "rede" },
                    { id: 5, word: "Software", translation: "programa" }
                ],
                isTraining: false
            };

            // --- Fun√ß√µes Utilit√°rias ---
            const showPage = (pageId) => {
                document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
                document.getElementById(pageId + '-page').classList.add('active');
            };
            const showToast = (message, type = 'success') => {
                const toast = document.getElementById('toast');
                const content = document.getElementById('toast-content');
                content.textContent = message;
                toast.className = `toast-custom border rounded shadow-lg ${type === 'error' ? 'bg-danger text-white' : 'bg-success text-white'}`;
                toast.classList.add('show');
                setTimeout(() => toast.classList.remove('show'), 3000);
            };

            // --- Fun√ß√µes de Atualiza√ß√£o da UI ---
            const updateDashboardUI = () => {
                document.getElementById('username-display').textContent = appState.user || 'Utilizador';
                document.getElementById('total-words').textContent = appState.stats.totalWords;
                document.getElementById('words-review').textContent = appState.stats.wordsInReview;
                document.getElementById('words-known').textContent = appState.stats.wordsKnown;
                document.getElementById('words-learned').textContent = appState.stats.wordsLearned;
            };
            const updateStudyUI = () => {
                const currentWord = appState.words[appState.currentWordIndex];
                document.getElementById('session-title').textContent = appState.isTraining ? 'üèãÔ∏è Sess√£o de Treino' : 'üìö Sess√£o de Estudo';
                document.getElementById('session-score-container').style.display = appState.isTraining ? 'none' : 'flex';
                document.getElementById('training-progress-text').style.display = appState.isTraining ? 'block' : 'none';
                document.getElementById('current-word').textContent = currentWord.word;
                document.getElementById('current-card').textContent = appState.currentWordIndex + 1;
                document.getElementById('total-cards').textContent = appState.words.length;
                document.getElementById('correct-count').textContent = appState.sessionStats.correct;
                document.getElementById('incorrect-count').textContent = appState.sessionStats.incorrect;
                document.getElementById('user-answer').value = '';
                document.getElementById('answer-form-container').style.display = 'block';
                document.getElementById('feedback-container').style.display = 'none';
                document.getElementById('user-answer').focus();
            };
            const initializeChart = () => {
                const ctx = document.getElementById('progress-chart');
                if (ctx && !Chart.getChart(ctx)) {
                    new Chart(ctx.getContext('2d'), {
                        type: 'line',
                        data: {
                            labels: ['Dia 1', 'Dia 2', 'Dia 3', 'Dia 4', 'Dia 5'],
                            datasets: [{
                                label: 'Total de Palavras Aprendidas',
                                data: [10, 25, 45, 70, 120],
                                borderColor: '#667eea',
                                backgroundColor: 'rgba(102, 126, 234, 0.1)',
                                fill: true,
                                tension: 0.4
                            }]
                        },
                        options: { responsive: true, scales: { y: { beginAtZero: true } }, plugins: { legend: { display: false } } }
                    });
                }
            };
            
            // --- L√≥gica do Estudo ---
            const nextCard = () => {
                if (appState.currentWordIndex >= appState.words.length - 1) {
                    showToast(`üéâ Sess√£o Conclu√≠da! Acertos: ${appState.sessionStats.correct} | Erros: ${appState.sessionStats.incorrect}`);
                    showPage('dashboard');
                } else {
                    appState.currentWordIndex++;
                    updateStudyUI();
                }
            };
            window.nextCard = nextCard; // Torna acess√≠vel para o onclick

            const defineCorrect = () => {
                showToast('‚úÖ Marcado como correto!');
                appState.sessionStats.correct++;
                appState.sessionStats.incorrect = Math.max(0, appState.sessionStats.incorrect - 1);
                nextCard();
            };
            window.defineCorrect = defineCorrect; // Torna acess√≠vel para o onclick

            // --- L√≥gica de Navega√ß√£o ---
            document.getElementById('show-signup').addEventListener('click', (e) => { e.preventDefault(); showPage('signup'); });
            document.getElementById('show-login').addEventListener('click', (e) => { e.preventDefault(); showPage('login'); });
            document.getElementById('study-back-btn').addEventListener('click', () => showPage('dashboard'));
            document.getElementById('training-back-btn').addEventListener('click', () => showPage('dashboard'));
            document.getElementById('settings-back-btn').addEventListener('click', () => showPage('dashboard'));

            // --- Event Listeners dos Formul√°rios e Bot√µes ---
            document.getElementById('login-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const username = document.getElementById('login-username').value;
                if (!username.trim()) { showToast('Por favor, insira um nome de utilizador.', 'error'); return; }
                appState.user = username.trim();
                updateDashboardUI();
                showPage('dashboard');
                showToast(`‚úÖ Bem-vindo de volta, ${appState.user}!`);
                setTimeout(initializeChart, 50);
            });
            document.getElementById('signup-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const password = document.getElementById('signup-password').value;
                const confirmPassword = document.getElementById('confirm-password').value;
                if (password !== confirmPassword) { showToast('‚ùå As senhas n√£o coincidem!', 'error'); return; }
                const username = document.getElementById('signup-username').value;
                if (!username.trim()) { showToast('Por favor, insira um nome de utilizador.', 'error'); return; }
                appState.user = username.trim();
                updateDashboardUI();
                showPage('dashboard');
                showToast('‚úÖ Conta criada com sucesso!');
                setTimeout(initializeChart, 50);
            });
            document.getElementById('logout-btn').addEventListener('click', () => {
                if (confirm('Tem a certeza de que deseja sair?')) {
                    appState.user = null;
                    showPage('login');
                    showToast('üëã Logout realizado com sucesso!');
                }
            });
            document.getElementById('start-study-btn').addEventListener('click', () => {
                appState.currentWordIndex = 0;
                appState.sessionStats = { correct: 0, incorrect: 0 };
                appState.isTraining = false;
                updateStudyUI();
                showPage('study');
            });
            window.startTraining = (setId) => {
                console.log('Starting training for set:', setId);
                appState.currentWordIndex = 0;
                appState.sessionStats = { correct: 0, incorrect: 0 };
                appState.isTraining = true;
                updateStudyUI();
                showPage('study');
            };
            document.getElementById('view-training-btn').addEventListener('click', () => {
                const percentage = Math.round((appState.dailyProgress.current / appState.dailyProgress.goal) * 100);
                document.getElementById('training-current').textContent = appState.dailyProgress.current;
                document.getElementById('training-goal').textContent = appState.dailyProgress.goal;
                document.getElementById('training-percentage').textContent = percentage;
                document.getElementById('training-progress-bar').style.width = percentage + '%';
                showPage('training');
            });
            document.getElementById('settings-btn').addEventListener('click', () => {
                document.getElementById('settings-username').textContent = appState.user || 'Utilizador';
                document.getElementById('daily-goal-input').value = appState.dailyGoal;
                showPage('settings');
            });
            document.getElementById('goal-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const newGoal = parseInt(document.getElementById('daily-goal-input').value);
                if (newGoal >= 1 && newGoal <= 100) {
                    appState.dailyGoal = newGoal;
                    appState.dailyProgress.goal = newGoal;
                    showToast(`‚úÖ Meta atualizada para ${newGoal} palavras!`);
                }
            });
            document.getElementById('reset-progress-btn').addEventListener('click', () => {
                if (confirm('Tem a certeza absoluta? Esta a√ß√£o n√£o pode ser desfeita.')) {
                    if (confirm('Confirma√ß√£o final! Todo o seu progresso ser√° apagado permanentemente.')) {
                        appState.stats = { totalWords: 0, wordsInReview: 0, wordsKnown: 0, wordsLearned: 0 };
                        showToast('üîÑ Progresso reiniciado permanentemente.', 'error');
                        updateDashboardUI();
                    }
                }
            });
            document.getElementById('answer-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const userAnswer = document.getElementById('user-answer').value.trim();
                const currentWord = appState.words[appState.currentWordIndex];
                const isCorrect = userAnswer.toLowerCase() === currentWord.translation.toLowerCase();
                const feedbackContainer = document.getElementById('feedback-container');
                const feedbackContent = document.getElementById('feedback-container');

                if (isCorrect) {
                    appState.sessionStats.correct++;
                    feedbackContent.innerHTML = `<h4 class="text-success">‚úÖ Correto!</h4><p>Voc√™ digitou: <strong>"${userAnswer}"</strong></p><p>A resposta √©: <strong>"${currentWord.translation}"</strong></p><button class="btn gradient-btn text-white mt-3" onclick="nextCard()">Pr√≥ximo Cart√£o</button>`;
                } else {
                    appState.sessionStats.incorrect++;
                    feedbackContent.innerHTML = `<h4 class="text-danger">‚ùå Incorreto</h4><p>Voc√™ digitou: <strong>"${userAnswer}"</strong></p><p>A resposta correta √©: <strong>"${currentWord.translation}"</strong></p><div class="mt-3"><button class="btn btn-success me-2" onclick="defineCorrect()">Definir como correta</button><button class="btn gradient-btn text-white" onclick="nextCard()">Pr√≥ximo Cart√£o</button></div>`;
                }
                
                document.getElementById('answer-form-container').style.display = 'none';
                feedbackContainer.style.display = 'block';
                updateStudyUI(); // Update counts
            });
        });
    </script>
</body>
</html> 